<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ali Khadangi - Portfolio</title>
    <style>
        /* --- CORE STYLES (Cyber-Noir Tech Look) --- */
        body {
            margin: 0;
            padding: 0;
            background-color: #02040a; /* Deepest Black-Blue */
            font-family: 'Courier New', Courier, monospace; /* Tech font */
            color: #ffffff;
            overflow-x: hidden; 
        }

        .scroll-spacer {
            height: 400vh; 
            width: 100%;
            pointer-events: none;
        }

        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            transition: opacity 1s ease;
        }

        #loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #00ffff; /* Cyan */
            font-size: 0.8rem;
            letter-spacing: 5px;
            z-index: 100;
            pointer-events: none;
            font-weight: bold;
            transition: opacity 0.5s ease;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        /* --- FLOATING TEXT (Now with Sliding Animation) --- */
        .narrative-text {
            position: fixed;
            top: 50%;
            /* We use transforms for centering and sliding */
            font-size: 3rem;
            font-weight: 900;
            width: 35%;
            opacity: 0;
            /* Smooth transition for both fade and slide */
            transition: opacity 0.6s cubic-bezier(0.22, 1, 0.36, 1), transform 0.6s cubic-bezier(0.22, 1, 0.36, 1);
            z-index: 10;
            pointer-events: none;
            text-shadow: 
                0 5px 15px rgba(0,0,0,1), 
                0 0 30px rgba(0,0,0,0.5);
        }

        #text-left {
            left: 8%;
            text-align: right;
            color: #00ffff;
            border-right: 4px solid #00ffff;
            padding-right: 20px;
            
            /* Initial State: Hidden + Shifted Left (-100px) + Centered Vertically (-50%) */
            transform: translate(-100px, -50%); 
        }

        #text-right {
            right: 8%;
            text-align: left;
            color: #ff0055;
            border-left: 4px solid #ff0055;
            padding-left: 20px;
            
            /* Initial State: Hidden + Shifted Right (+100px) + Centered Vertically (-50%) */
            transform: translate(100px, -50%);
        }

        /* The Active State (Triggered by JS) */
        .narrative-text.active {
            opacity: 1;
            /* Reset horizontal shift to 0, keep vertical center */
            transform: translate(0, -50%); 
        }

        .sub-text {
            display: block;
            font-size: 0.9rem;
            color: #ffffff;
            margin-top: 5px;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-weight: 400;
            text-shadow: 0 2px 4px rgba(0,0,0,1);
        }

        .scroll-indicator {
            position: fixed;
            bottom: 30px;
            width: 100%;
            text-align: center;
            color: rgba(255, 255, 255, 0.5);
            z-index: 10;
            font-size: 0.7rem;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        /* --- CV SECTION --- */
        #cv-section {
            position: relative;
            z-index: 20;
            background: linear-gradient(to bottom, rgba(2,4,10,0), #02040a 10%, #02040a);
            padding: 50px 20px 100px 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            opacity: 0;
            transform: translateY(50px);
            transition: all 1s ease-out;
        }

        #cv-section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .cv-container {
            max-width: 850px;
            width: 100%;
            padding-top: 50px;
        }

        /* Typography */
        h1 { font-weight: 700; font-size: 3.5rem; margin: 0 0 10px 0; letter-spacing: -3px; text-transform: uppercase; text-shadow: 0 0 10px rgba(255,255,255,0.1); }
        h2 { font-size: 1.2rem; color: #00ffff; text-transform: uppercase; letter-spacing: 4px; margin-bottom: 50px; text-shadow: 0 0 10px rgba(0,255,255,0.5); }
        
        .section-header {
            font-size: 1.5rem;
            color: #ff0055; /* Pink accent */
            border-bottom: 1px solid #333;
            padding-bottom: 10px;
            margin-top: 80px;
            margin-bottom: 40px;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: 0 0 10px rgba(255, 0, 85, 0.4);
        }

        .job-block { margin-bottom: 50px; border-left: 2px solid #333; padding-left: 25px; transition: border-color 0.3s; }
        .job-block:hover { border-left: 2px solid #00ffff; }
        
        .job-title { font-size: 1.3rem; display: block; margin-bottom: 5px; font-weight: bold; color: #fff; letter-spacing: -1px; }
        .job-company { color: #8fa1b3; font-style: italic; margin-right: 10px; }
        .job-date { font-size: 0.75rem; color: #666; text-transform: uppercase; letter-spacing: 1px; }
        .job-desc { color: #a0a0a0; line-height: 1.6; font-weight: 300; margin-top: 15px; font-size: 0.95rem; }
        
        /* Project Grid */
        .project-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        @media(max-width: 700px) { .project-grid { grid-template-columns: 1fr; } }

        .project-card {
            background: rgba(0, 255, 255, 0.02);
            padding: 25px;
            border: 1px solid #1a1a1a;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        .project-card:hover { 
            border-color: #00ffff; 
            transform: translateY(-5px); 
            background: rgba(0,255,255,0.05); 
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.1);
        }
        .project-title { color: #00ffff; font-weight: bold; display: block; margin-bottom: 10px; font-size: 1.1rem; }

        .skills-tag {
            display: inline-block;
            background: rgba(0, 255, 255, 0.1);
            color: #00ffff;
            padding: 4px 10px;
            font-size: 0.7rem;
            margin-right: 5px;
            margin-bottom: 5px;
            border-radius: 0px; 
            border: 1px solid rgba(0, 255, 255, 0.2);
        }

        /* Footer / Contact */
        .contact-section {
            text-align: center;
            padding-bottom: 80px;
            padding-top: 40px;
        }
        
        .contact-btn {
            display: inline-block;
            margin-bottom: 30px;
            padding: 15px 40px;
            border: 1px solid #00ffff;
            color: #00ffff;
            text-decoration: none;
            font-size: 0.8rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            transition: all 0.3s;
        }
        .contact-btn:hover { background: #00ffff; color: #000; box-shadow: 0 0 20px rgba(0, 255, 255, 0.4); }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 30px;
        }

        .social-link {
            color: #8fa1b3;
            text-decoration: none;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: color 0.3s;
            border-bottom: 1px solid transparent;
        }
        .social-link:hover {
            color: #ff0055;
            border-bottom: 1px solid #ff0055;
            text-shadow: 0 0 8px rgba(255, 0, 85, 0.6);
        }

    </style>
    
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.154.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.154.0/examples/jsm/"
            }
        }
    </script>
</head>
<body>

    <div id="loading">SYSTEM INITIALIZING...</div>
    
    <div id="canvas-container"></div>

    <div id="text-left" class="narrative-text">
        ANALYZING
        <span class="sub-text">Perception // SLAM</span>
    </div>

    <div id="text-right" class="narrative-text">
        SYNTHESIZING
        <span class="sub-text">Cognition // LLMs</span>
    </div>

    <div class="scroll-indicator" id="scroll-msg">Initiate Scroll Sequence</div>

    <div class="scroll-spacer"></div>

    <div id="cv-section">
        <div class="cv-container">
            <h1>Ali Khadangi</h1>
            <h2>Robotics & AI Engineer</h2>

            <div class="section-header">Professional Experience</div>

            <div class="job-block">
                <span class="job-title">Working Student - SLAM Development</span>
                <span class="job-company">Capgemini Engineering (Munich)</span>
                <span class="job-date">Aug 2022 — May 2025</span>
                <div style="margin-top:10px;">
                    <span class="skills-tag">ROS2</span><span class="skills-tag">C++</span><span class="skills-tag">LiDAR</span>
                </div>
                <p class="job-desc">
                    Designed and evaluated SLAM algorithms (LiDAR, IMU, GPS) in ROS1 & ROS2. 
                    Modified ROS nodes for output analysis and communication. Integrated various LiDAR sensors and tested algorithms using Carla datasets.
                </p>
            </div>

            <div class="section-header">Selected Projects</div>
            <div class="project-grid">
                <div class="project-card">
                    <span class="project-title">Causal Sim-to-Real RL Framework</span>
                    <p class="job-desc">
                        Developed a causal Deep-RL framework to improve policy generalization in CARLA. Created a custom Gymnasium environment (gym_causal_intersection) to study causality and spurious correlations in autonomous driving.
                    </p>
                </div>
                <div class="project-card">
                    <span class="project-title">Lane & Horizon Detector</span>
                    <p class="job-desc">
                        Developed an efficient Computer Vision system using Python & OpenCV. Implemented an innovative line-comparison algorithm to achieve precise, resource-efficient detection.
                    </p>
                </div>
                <div class="project-card">
                    <span class="project-title">AI vs Human Text Analysis</span>
                    <p class="job-desc">
                        Evaluated probability calculation and hidden states to distinguish LLM-generated text (GPT, Claude, LLaMa) from human writing. Built ML classifiers to compare accuracy.
                    </p>
                </div>
                <div class="project-card">
                    <span class="project-title">Whiteboard Text Recorder</span>
                    <p class="job-desc">
                        Designed a Python-based program for detecting and recording handwritten text from whiteboards.
                    </p>
                </div>
            </div>

            <div class="section-header">Education</div>

            <div class="job-block">
                <span class="job-title">M.Sc. Applied Computer Science</span>
                <span class="job-company">Ruhr University Bochum</span>
                <span class="job-date">Since Apr 2020</span>
                <p class="job-desc">
                    <strong>Focus:</strong> Autonomous Vehicles & AI (1.7), Autonomous Robotics (1.0).<br>
                    <strong>Thesis:</strong> "Causally Guided Sim-To-Real Transfer And Generalizability In RL".
                </p>
            </div>

            <div class="job-block">
                <span class="job-title">B.Sc. Computer Science</span>
                <span class="job-company">Khajeh Nasir Toosi University of Technology</span>
                <span class="job-date">Sep 2013 — Sep 2018</span>
                <p class="job-desc">
                    <strong>Award:</strong> Top Bachelor Thesis Project (IEEE Student Branch, 2018).
                </p>
            </div>

            <div class="section-header">Technical Arsenal</div>
            <div class="job-block" style="border:none; padding:0;">
                <p class="job-desc">
                    <strong>Languages:</strong> Python, C++, SQL, Bash<br>
                    <strong>AI/Robotics:</strong> ROS2, PyTorch, LLM/Agents, RAG, Knowledge Graphs, Docker, Carla Simulator<br>
                    <strong>Spoken Languages:</strong> English (Fluent), German (Fluent), Persian (Native), Azari (Native)
                </p>
            </div>

            <div class="contact-section">
                <a href="mailto:alikhadangi@gmail.com" class="contact-btn">Establish Connection (Email)</a>
                
                <div class="social-links">
                    <a href="https://github.com/weisenberg/" target="_blank" class="social-link">GitHub</a>
                    <a href="https://www.linkedin.com/in/ali-khadangi-9a061482" target="_blank" class="social-link">LinkedIn</a>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import * as THREE from 'three';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

        // --- Configuration ---
        const BACKGROUND_COLOR = 0x02040a;
        
        // --- Scene Setup ---
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(BACKGROUND_COLOR);
        scene.fog = new THREE.FogExp2(BACKGROUND_COLOR, 0.02);

        // --- Camera ---
        const camera = new THREE.PerspectiveCamera(35, window.innerWidth / window.innerHeight, 0.1, 100);
        camera.position.set(0, 0, 7.5); 

        // --- Renderer ---
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 1.2; 
        container.appendChild(renderer.domElement);

        // --- LIGHTING ---
        const ambientLight = new THREE.AmbientLight(0x111111, 1);
        scene.add(ambientLight);

        // Main Key Light (Cool White)
        const mainLight = new THREE.SpotLight(0xffffff, 10);
        mainLight.position.set(2, 5, 5); 
        mainLight.angle = Math.PI / 6;
        mainLight.penumbra = 0.5;
        mainLight.castShadow = true;
        scene.add(mainLight);

        // Cyan Rim Light (Left)
        const cyanLight = new THREE.SpotLight(0x00ffff, 10);
        cyanLight.position.set(-5, 0, 2);
        scene.add(cyanLight);

        // Magenta Rim Light (Right)
        const magentaLight = new THREE.SpotLight(0xff0055, 10);
        magentaLight.position.set(5, 0, 2);
        scene.add(magentaLight);

        // --- PARTICLES ---
        const particleCount = 1000;
        const particleGeometry = new THREE.BufferGeometry();
        const particlePositions = new Float32Array(particleCount * 3);
        for(let i=0; i<particleCount * 3; i++) {
            particlePositions[i] = (Math.random() - 0.5) * 20;
        }
        particleGeometry.setAttribute('position', new THREE.BufferAttribute(particlePositions, 3));
        const particleMaterial = new THREE.PointsMaterial({
            color: 0x00ffff,
            size: 0.03,
            transparent: true,
            opacity: 0.3,
        });
        const particleSystem = new THREE.Points(particleGeometry, particleMaterial);
        scene.add(particleSystem);

        // --- MATERIAL (Obsidian + Wireframe) ---
        const obsidianMaterial = new THREE.MeshPhysicalMaterial({
            color: 0x111111,       
            roughness: 0.1,        
            metalness: 0.8,        
            clearcoat: 1.0,        
            clearcoatRoughness: 0.1,
        });

        const wireframeMaterial = new THREE.MeshBasicMaterial({
            color: 0x00ffff,
            wireframe: true,
            transparent: true,
            opacity: 0.05, 
        });

        let group = new THREE.Group();
        scene.add(group);

        // --- Load Model ---
        const loader = new GLTFLoader();
        const MODEL_URL = 'https://threejs.org/examples/models/gltf/LeePerrySmith/LeePerrySmith.glb';

        loader.load(MODEL_URL, function (gltf) {
            const model = gltf.scene;

            model.traverse((child) => {
                if (child.isMesh) {
                    child.material = obsidianMaterial;
                    child.castShadow = true;
                    child.receiveShadow = true;

                    const wireframeMesh = child.clone();
                    wireframeMesh.material = wireframeMaterial;
                    wireframeMesh.scale.multiplyScalar(1.01); 
                    group.add(wireframeMesh);
                }
            });

            // Center
            const box = new THREE.Box3().setFromObject(model);
            const center = box.getCenter(new THREE.Vector3());
            model.position.sub(center); 
            
            // Scale
            const size = box.getSize(new THREE.Vector3());
            const maxDim = Math.max(size.x, size.y, size.z);
            const scale = 2.7 / maxDim; 
            group.scale.set(scale, scale, scale);

            group.add(model);

            document.getElementById('loading').style.opacity = 0;

        }, undefined, function (error) {
            console.error(error);
        });

        // --- MOUSE TRACKING VARS ---
        let mouseX = 0;
        let mouseY = 0;
        const windowHalfX = window.innerWidth / 2;
        const windowHalfY = window.innerHeight / 2;

        document.addEventListener('mousemove', (event) => {
            mouseX = (event.clientX - windowHalfX) / windowHalfX;
            mouseY = (event.clientY - windowHalfY) / windowHalfY;
        });

        // --- SCROLL STATE VARS ---
        let scrollRotationY = 0; 
        let scrollSlideX = 0;

        // --- SCROLL LOGIC ---
        const textLeft = document.getElementById('text-left');
        const textRight = document.getElementById('text-right');
        const cvSection = document.getElementById('cv-section');
        
        function onScroll() {
            const scrollY = window.scrollY;
            const windowH = window.innerHeight;
            const overlayHeight = windowH * 4; 
            
            if (scrollY <= overlayHeight) {
                const progress = scrollY / overlayHeight;
                
                scrollRotationY = progress * Math.PI * 2;
                scrollSlideX = Math.sin(scrollRotationY) * 1.2;

                // Text Sliding Logic via Class
                const sineVal = Math.sin(scrollRotationY);
                if (sineVal > 0.5) {
                    textLeft.classList.add('active');
                    textRight.classList.remove('active');
                } else if (sineVal < -0.5) {
                    textLeft.classList.remove('active');
                    textRight.classList.add('active');
                } else {
                    textLeft.classList.remove('active');
                    textRight.classList.remove('active');
                }

                if (scrollY > overlayHeight - windowH) {
                    const fadeProgress = (scrollY - (overlayHeight - windowH)) / windowH;
                    container.style.opacity = 1 - fadeProgress;
                } else {
                    container.style.opacity = 1;
                }
            }

            if (scrollY > overlayHeight - (windowH / 2)) {
                cvSection.classList.add('visible');
            } else {
                cvSection.classList.remove('visible');
            }
        }

        window.addEventListener('scroll', onScroll);
        window.addEventListener('resize', onWindowResize, false);

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        // --- ANIMATION LOOP ---
        function animate() {
            requestAnimationFrame(animate);

            if (group) {
                // --- COMBINED ROTATION LOGIC ---
                const targetLookX = mouseY * 0.5; 
                const targetLookY = mouseX * 0.5;

                // Apply Rotation
                group.rotation.x += (targetLookX - group.rotation.x) * 0.05;
                
                // Combine scroll + mouse
                const totalTargetY = scrollRotationY + targetLookY;
                group.rotation.y += (totalTargetY - group.rotation.y) * 0.05;

                // Apply Slide
                group.position.x += (scrollSlideX - group.position.x) * 0.05;
            }
            
            if(particleSystem) {
                particleSystem.rotation.y += 0.001;
            }

            renderer.render(scene, camera);
        }

        animate();
    </script>
</body>
</html>
